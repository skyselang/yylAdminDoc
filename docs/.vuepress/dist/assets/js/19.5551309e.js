(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{485:function(a,t,n){"use strict";n.r(t);var i=n(29),e=Object(i.a)({},(function(){var a=this,t=a.$createElement,n=a._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[n("p",[a._v("前端和后端部署在同一个域名下，可以解决跨域问题，可以通过下面两种方法设置。")]),a._v(" "),n("blockquote",[n("p",[a._v("当然前后端分开部署正常情况下也不会有跨域问题，yylAdmin已经做了跨域处理")])]),a._v(" "),n("h3",{attrs:{id:"一-默认打包路径"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#一-默认打包路径"}},[a._v("#")]),a._v(" 一，默认打包路径")]),a._v(" "),n("p",[a._v("1、把 yylAdminWeb/.env.production.domain 文件重命名成 .env.production.local，"),n("br"),a._v("\n2、运行打包命令 cnpm run build:prod，"),n("br"),a._v("\n3、把 yylAdminWeb/admin 文件夹复制到 yylAdmin/public 文件夹下 yylAdmin/public/admin"),n("br"),a._v("\n4、部署yylAdmin到服务器上，浏览器打开： 你的域名/admin/")]),a._v(" "),n("h3",{attrs:{id:"二-自定义打包路径"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#二-自定义打包路径"}},[a._v("#")]),a._v(" 二，自定义打包路径")]),a._v(" "),n("h4",{attrs:{id:"设置前端环境接口地址"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#设置前端环境接口地址"}},[a._v("#")]),a._v(" 设置前端环境接口地址")]),a._v(" "),n("p",[a._v("把.env.production环境文件中的接口地址设置为空：VUE_APP_BASE_API = ''")]),a._v(" "),n("blockquote",[n("p",[a._v("可以根据打包环境修改对应文件，如果打包测试环境，就在.env.staging中修改"),n("br"),a._v(" "),n("img",{attrs:{src:a.$withBase("/image/course/same-domain-name/1-env-prod.png"),alt:""}})])]),a._v(" "),n("h4",{attrs:{id:"配置路径和打包目录、打包"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#配置路径和打包目录、打包"}},[a._v("#")]),a._v(" 配置路径和打包目录、打包")]),a._v(" "),n("p",[a._v("把.vue.config.js配置文件中的公共路径publicPath设置为/admin/,打包路径outputDir设置为admin"),n("br"),a._v("\n运行打包命令：cnpm run build:prod")]),a._v(" "),n("blockquote",[n("p",[a._v("这两个路径名称可以自定义，但是名称必须一样；如果修改的是测试环境文件，运行：cnpm run build:stage\n"),n("img",{attrs:{src:a.$withBase("/image/course/same-domain-name/2-vue-config-js.png"),alt:""}})])]),a._v(" "),n("h4",{attrs:{id:"复制打包目录到yyladmin-public文件夹下"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#复制打包目录到yyladmin-public文件夹下"}},[a._v("#")]),a._v(" 复制打包目录到yylAdmin/public文件夹下")]),a._v(" "),n("p",[a._v("把前面打包后生成的目录admin复制到后端public文件下")]),a._v(" "),n("blockquote",[n("p",[a._v("就是把yylAdminWeb/admin文件夹复制到yylAdmin/public文件夹下：yylAdmin/public/admin\n"),n("img",{attrs:{src:a.$withBase("/image/course/same-domain-name/3-copy-yyladmin-public.png"),alt:""}})])]),a._v(" "),n("h4",{attrs:{id:"本地测试一下是否能访问"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#本地测试一下是否能访问"}},[a._v("#")]),a._v(" 本地测试一下是否能访问")]),a._v(" "),n("p",[a._v("http://localhost:9526/admin/")]),a._v(" "),n("blockquote",[n("p",[a._v("http://localhost:9526是后端地址，/admin/是前面设置的公共路径\n"),n("img",{attrs:{src:a.$withBase("/image/course/same-domain-name/4-localhost-open.png"),alt:""}})])]),a._v(" "),n("h4",{attrs:{id:"部署yyladmin到服务器上、访问"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#部署yyladmin到服务器上、访问"}},[a._v("#")]),a._v(" 部署yylAdmin到服务器上、访问")]),a._v(" "),n("p",[a._v("你的域名/admin/")]),a._v(" "),n("blockquote",[n("p",[a._v("输入部署后端域名，再加上公共路径就可以访问了\n"),n("img",{attrs:{src:a.$withBase("/image/course/same-domain-name/5-pro-open.png"),alt:""}})])]),a._v(" "),n("h4",{attrs:{id:"前台前端"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#前台前端"}},[a._v("#")]),a._v(" 前台前端")]),a._v(" "),n("p",[a._v("同样，可以把前台前端（web、h5）、后台前端（yylAdminWeb）与 后端（yylAdmin）放到同一个域名下，这样也不会有跨域问题")])])}),[],!1,null,null,null);t.default=e.exports}}]);